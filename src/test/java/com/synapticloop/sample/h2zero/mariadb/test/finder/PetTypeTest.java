package com.synapticloop.sample.h2zero.mariadb.test.finder;

// - - - - thoughtfully generated by synapticloop h2zero - - - - 
//    with the use of synapticloop templar templating language
//            (java/test/java-finder-test.templar)


import static org.junit.Assert.*;

import org.junit.Assert;
import org.junit.AfterClass;
import org.junit.BeforeClass;
import org.junit.Test;
import com.synapticloop.sample.h2zero.mariadb.ConnectionManagerInitialiserOverride;
import com.synapticloop.h2zero.base.manager.mariadb.ConnectionManager;
import com.synapticloop.sample.h2zero.mariadb.test.DatabaseSetupTest;


import java.sql.Connection;
import java.sql.SQLException;
import java.util.ArrayList;
import java.sql.*;
import java.util.List;


import com.synapticloop.sample.h2zero.mariadb.finder.PetTypeFinder;

/**
 * WARNING NOTE: these tests are designed to test the generated SQL statements
 * __NOT__ whether the database actually returns sane results.
 * 
 * These will also test to ensure that connections are setting closed properly
 * so that there are no resource leakages.
 */

public class PetTypeTest extends DatabaseSetupTest {

	@Test
	public void testPetTypeFindByPrimaryKey() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		// this shouldn't find anything - and we don't care - only about SQLExceptions
		PetTypeFinder.findByPrimaryKey(1L)
				.execute();

		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindByPrimaryKeySilent() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		Assert.assertNull(PetTypeFinder.findByPrimaryKey(-831486134981L)
				.executeSilent());

		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindByPrimaryKeyWithConnection() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		try (Connection connection = ConnectionManager.getConnection()) {
			PetTypeFinder.findByPrimaryKey(1L)
				.withConnection(connection)
				.execute();

		}
		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindByPrimaryKeyWithConnectionSilent() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		try (Connection connection = ConnectionManager.getConnection()) {
			Assert.assertNull(PetTypeFinder.findByPrimaryKey(-831486134981L)
				.withConnection(connection)
				.executeSilent());

		}
		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindAll() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		Assert.assertEquals(0, PetTypeFinder.findAll()
				.execute()
				.size());

		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindAllLimitOffset() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		Assert.assertEquals(0, PetTypeFinder.findAll()
			.withLimit(1)
			.withOffset(0)
			.execute()
			.size());
		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindAllSilent() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		Assert.assertEquals(0, PetTypeFinder.findAll()
				.executeSilent()
				.size());

		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindAllLimitOffsetSilent() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		Assert.assertEquals(0, PetTypeFinder.findAll()
				.withLimit(1)
				.withOffset(0)
				.executeSilent()
				.size());

		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindAllWithConnection() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		try (Connection connection = ConnectionManager.getConnection()) {
			Assert.assertEquals(0, PetTypeFinder.findAll()
				.withConnection(connection)
				.execute()
				.size());

		}
		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindAllWithConnectionSilent() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		try (Connection connection = ConnectionManager.getConnection()) {
			Assert.assertEquals(0, PetTypeFinder.findAll()
				.withConnection(connection)
				.executeSilent()
				.size());

		}
		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindAllWithConnectionLimit() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		try (Connection connection = ConnectionManager.getConnection()) {
			PetTypeFinder.findAll().withConnection(connection)
				.withLimit(1)
				.withOffset(0)
				.execute();
		}

		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindAllWithConnectionLimitSilent() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		try (Connection connection = ConnectionManager.getConnection()) {
			Assert.assertEquals(0, PetTypeFinder.findAll()
				.withConnection(connection)
				.withLimit(1)
				.withOffset(0)
				.executeSilent()
				.size());
		}

		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindAllWithConnectionOffset() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		try (Connection connection = ConnectionManager.getConnection()) {
			PetTypeFinder.findAll()
				.withConnection(connection)
				.withLimit(null)
				.withOffset(1)
				.execute();
			Assert.fail("A SQL Exception should have been thrown as there was an offset without a limit set.");		} catch(SQLException ignored) {
		}		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindAllWithConnectionOffsetSilent() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		try (Connection connection = ConnectionManager.getConnection()) {
			PetTypeFinder.findAll()
				.withConnection(connection)
				.withLimit(null)
				.withOffset(0)
				.executeSilent();

		}
		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindAllWithConnectionLimitOffset() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		try (Connection connection = ConnectionManager.getConnection()) {
			PetTypeFinder.findAll()
				.withConnection(connection)
				.withLimit(1)
				.withOffset(0)
				.execute();
		}
		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

	@Test
	public void testPetTypeFindAllWithNullConnectionLimitOffset() throws SQLException {
		int numConnections = ConnectionManager.getComboPooledDataSource().getNumConnections();
		int numBusyConnections = ConnectionManager.getComboPooledDataSource().getNumBusyConnections();
		PetTypeFinder.findAll()
				.withConnection(null)
				.withLimit(1)
				.withOffset(0)
				.execute();

		Assert.assertEquals(numConnections, ConnectionManager.getComboPooledDataSource().getNumConnections());
		// need to sleep to ensure that the connection has time to close - hacky... :(
		try { Thread.sleep(1); } catch (InterruptedException e) { /* do nothing */ }
		Assert.assertEquals(numBusyConnections, ConnectionManager.getComboPooledDataSource().getNumBusyConnections());
	}

}
