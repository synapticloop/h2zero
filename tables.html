<!doctype html><html><head><title>h2zero by synapticloop</title><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]--><link rel="stylesheet" href="assets/css/main.css" /><!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]--><script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script></head><body><div id="header"><h1 id="logo"><a href="http://synapticloop.github.io/">Synapticloop</a> :: <a href="index.html">h2zero</a></h1><nav id="nav"><ul><li><a href="#">Projects</a><ul><li><a href="/h2zero/">h2zero</a></li><li><a href="https://github.com/synapticloop/backblaze-b2-java-api/">backblaze b2 java api</a></li><li><a href="/templar/">templar</a></li><li><a href="/templar-gen/">templar gen</a></li><li><a href="https://github.com/synapticloop/linode-api/">linode java api</a></li><li><a href="https://github.com/synapticloopltd/scaleway-java-api/">scaleway java api</a></li></ul></li></ul></nav></div><section id="main"><div class="container"><header class="major"><h2>Welcome to h2zero</h2><p>an easy to use object relationship mapper (ORM) code generator for Java and MySQL</p></header><div class="row 200%"><div class="4u 12u$(medium)"><section id="sidebar"><section><h3>h2zero</h3><p>An Object Relationship Mapper (ORM) generator for Java, MySQL and optionally a J2EE container</p><hr /><ul><li><a href="index.html">Home</a></li><li><a href="quick-start.html">Quick Start</a></li><li>Allowable JSON Keys Reference<ul><li><a href="allowable-keys-schema-objects.html">Schema Objects</a></li><li><a href="allowable-keys-sql-interactions.html">SQL Interactions</a></li></ul></li><li><a href="database-naming-conventions.html">Database Naming Conventions</a></li><li><a href="generated-code.html">Generated Code</a></li><li><a href="method-signatures.html">Method Signatures</a></li><li><a href="validators.html">Validators</a></li><li><a href="taglibs.html">Tag libraries</a></li><li><a href="clauses-and-fields.html">Clauses and Fields</a></li></ul><ul><li><a href="file-format.html">File Format</a></li><li><a href="options.html">Options</a></li><li><a href="database.html">Database</a></li><li><a href="tables.html">Tables</a><ul><li><a href="fields.html">Fields</a></li><li><a href="finders.html">Finders</a></li><li><a href="field-finders.html">Field Finders</a></li><li><a href="deleters.html">Deleters</a></li><li><a href="inserters.html">Inserters</a></li><li><a href="updaters.html">Updaters</a></li><li><a href="field-updaters.html">Field Updaters</a></li><li><a href="questions.html">Questions</a></li><li><a href="counters.html">Counters</a></li><li><a href="constants.html">Constants</a></li></ul></li><li><a href="views.html">Views</a><ul><li><a href="view-finders.html">Finders</a></li><li><a href="view-field-finders.html">Field Finders</a></li><li><a href="view-questions.html">Questions</a></li><li><a href="view-counters.html">Counters</a></li></ul></li></ul></section><hr /><section><h3>View this project on github</h3><footer><ul class="actions"><li><a href="https://github.com/synapticloop/h2zero" class="button small alt">GitHub Project</a></li></ul></footer></section><hr /><section><h3>templar-gen</h3><p>This project is maintained by <a href="https://github.com/synapticloop">synapticloop</a> and these pages were generated with <a href="https://github.com/synapticloop/templar-gen/">synapticloop templar-gen</a></p></section></section></div><div class="8u$ 12u$(medium) important(medium)"><section id="content"><h3>Tables.</h3><p>Tables are the base object that then generates the model objects for interaction through the java code.  As such  they are relatively straight-forward, the field definitions are the next important piece of the h2zero generation.</p><p>For each database schema, there must be a JSONArray keyed on <a href="tables.html"><code>tables</code></a> of JSONObjects</p><pre class="prettyprint"><code>"tables": [
	{
		"name": "user_type",
		"engine": "innodb",
		"charset": "UTF8",
		"comments": [			"comment for the table, which is an array and can be on multiple",			"lines"
		],
		...
	},
	{
		"name": "user",
		...
	},
]
</code></pre><table><thead><tr><th>JSON key</th><th>usage</th><th>allowable values</th><th>notes</th></tr></thead><tbody><tr><td><strong>name</strong></td><td class="mandatory"><span>mandatory</span></td><td>any valid MySQL table name value</td><td>Each table <strong>MUST</strong> have a name.  It is recommended to use <code>snake_case</code> for field naming.</td></tr><tr><td><strong>engine</strong></td><td class="optional"><span>optional</span></td><td>Any valid MySQL storage engine type, although it is recommended to use<code>Innodb</code>.  The available storage types are:<code>MyISAM</code>, <code>InnoDB</code>, <code>Memory</code>, <code>Merge</code>, <code>Archive</code>, <code>Federated</code>, <code>NDB</code>, <code>CSV</code>, <code>Blackhole</code></td><td>The default is <code>innodb</code></td></tr><tr><td><strong>charset</strong></td><td class="optional"><span>optional</span></td><td>Any valid MySQL character set</td><td>By default this is set to <code>UTF8</code>.</td></tr><tr><td><strong>comments</strong></td><td class="optional"><span>optional</span></td><td>A JSON Array of strings</td><td>These do not affect the code generation, but they do insert comments where possible</td></tr></tbody></table><p>Each table <strong>MUST</strong> have a key of <code>name</code> which will map to the database schema and model object in CamelCase naming conventions.</p><p>For example the <code>user_type</code> table name above will generate the following model object</p><p><em>The <code>user_type</code> table is a <u>Constant Model</u> and differs from normal other models in that constant tables cannot be updated, deleted or inserted into as they are pre-generated by h2zero.</em></p><ul><li><code>src/main/java/synapticloop/sample/h2zero/model/UserType.java</code><br />[<a href="src/main/java/synapticloop/sample/h2zero/model/UserType.java">plain java</a> | <a href="src/main/java/synapticloop/sample/h2zero/model/UserType.java.html">pretty-printed</a>]</li></ul><p>The <code>user</code> table name above will generate the following model object</p><ul><li><code>src/main/java/synapticloop/sample/h2zero/model/User.java</code><br />[<a href="src/main/java/synapticloop/sample/h2zero/model/User.java">plain java</a> | <a href="src/main/java/synapticloop/sample/h2zero/model/User.java.html">pretty-printed</a>]</li></ul><p><em>The <code>user</code> table is a <u>Regular Model</u> object that maps to the underlying MySQL table and h2zero will allow generation of all create, read, update and delete (CRUD) methods.</em></p><h4>Models in General</h4><p>Models come in two flavours, regular and constant.  They both share some base features and functionality asdetailed below:</p><p><strong>BINDER</strong></p><pre class="prettyprint lang-java"><code>// the binder is unused in code, but will generate compile problems if this 
// class is no longer referenced in the h2zero file. Just a nicety for
// removing dead code
@SuppressWarnings("unused")
private static final String BINDER = Constants.USER_TYPE_binder;
</code></pre><p>As mentioned in the comments above the field, the <code>BINDER</code> is only used as a compile time error so that dead code can be removed.  Most of the generated code contains this code that references the constant. This will ensure that when model names are changed, or any of tyhe interaction names are changed (e.g. finders, questions, counters etc.) </p><p><strong>PRIMARY_KEY_FIELD</strong></p><pre class="prettyprint lang-java"><code>public static final String PRIMARY_KEY_FIELD = "id_user_type";
</code></pre><p>This is a reference to the primary key field in the database.  Every table (and therefore every model) must have a primary key on it.</p><p><strong>Member variable declarations</strong></p><p>Each field that is attached to the table will generate a declaration.</p><pre class="prettyprint lang-java"><code>private Long idUserType = null;
private String nmUserType = null;
</code></pre><p><strong>Constructor</strong></p><p>Every model has a constructor with a signature that contains all of the fields.  Despite the fact that you cannot create new constants, the constant models still include a constructor for use with finders, counters and questions.</p><pre class="prettyprint lang-java"><code>public UserType(Long idUserType, String nmUserType) {
	this.idUserType = idUserType;
	this.nmUserType = nmUserType;
}
</code></pre><p><strong>Getters</strong></p><pre class="prettyprint lang-java"><code>/*
 * Boring ol' getters and setters 
 */

public Long getIdUserType() {return(this.idUserType);}
public String getNmUserType() {return(this.nmUserType);}
</code></pre><p>Getters are generated (in condensed format) for each field on the table.  No setters are generated for constant models as you may not change constants.</p><p><strong>String methods</strong></p><pre class="prettyprint lang-java"><code>public String toString() {
	StringBuilder stringBuilder = new StringBuilder();
	stringBuilder.append("Model[UserType]\n");
	stringBuilder.append("  Field[idUserType:" + this.idUserType + "]\n");
	stringBuilder.append("  Field[nmUserType:" + this.nmUserType + "]\n");
	return(stringBuilder.toString());
}

public String toJsonString() {
	// !!! work in progress !!!
	StringBuilder stringBuilder = new StringBuilder();
	stringBuilder.append("{\n");
	stringBuilder.append("  \"model\": {\n");
	stringBuilder.append("    \"name\": \"UserType\",\n");
	stringBuilder.append("    \"fields\": [\n");
	stringBuilder.append("     { \"name\": \"idUserType\", \"value\": " + this.idUserType + " }, \n");
	stringBuilder.append("     { \"name\": \"nmUserType\", \"value\": \"" + this.nmUserType + "\" }\n");
	stringBuilder.append("    ]\n");
	stringBuilder.append("  }\n");
	stringBuilder.append("}\n");
	return(stringBuilder.toString());
}

public String getJsonString() {
	return(toJsonString());
}
</code></pre><p>The string methods are automatically generated for each model.  As the comment notes above, it is a work in progress.  Care must be taken when utilising this method on sensitive information contained within the model, e.g. passwords, credit card details etc.</p><p>The <code>getJsonString()</code> method signature above is for JSTL or templar referencing for output.</p><h4>Constant Models</h4><p><em>See the section on <a href="constants.html"><code>constants</code></a> for more information on how to generate them.</em></p><h4>Regular Models</h4><p>Regular models are the default generation for h2zero and, as opposed to <a href="constants.html"><code>constants</code></a>, allow access to insert new rows into the database and have access to the full range of interactions.  This is the foundation for the h2zero generation.</p><h4>Additional methods and member variables</h4><p>In addition to the general generation mentioned above, for each of the constant models, the following field and method signatures are generated:</p><p><strong>Static Final Member Variable References</strong></p><pre class="prettyprint lang-java"><code>private static final String SQL_INSERT = "insert into user values (?, ?, ?, ?, ?, ?, ?, ?)";
private static final String SQL_UPDATE = "update user set id_user_type = ?, fl_is_alive = ?, num_age = ?, nm_username = ?, txt_address_email = ?, txt_password = ?, dtm_signup = ? where " + PRIMARY_KEY_FIELD + " = ?";
private static final String SQL_DELETE = "delete from user where " + PRIMARY_KEY_FIELD + " = ?";
private static final String SQL_ENSURE = "select " + PRIMARY_KEY_FIELD + " from user where id_user_type = ? and fl_is_alive = ? and num_age = ? and nm_username = ? and txt_address_email = ? and txt_password = ? and dtm_signup = ?";
</code></pre><p>The basic CRUD operations for the model.  Each model knows how to create, read, update and delete itself from the database.  There is also an 'ensure' mode, which will be covered later in this documentation set.</p><p><strong>Constructors</strong></p><pre class="prettyprint lang-java"><code>public User(Long idUser, Long idUserType, Boolean flIsAlive, Integer numAge, String nmUsername, String txtAddressEmail, String txtPassword, Timestamp dtmSignup)
public User(Long idUser, Long idUserType, Integer numAge, String nmUsername, String txtAddressEmail, String txtPassword) 
</code></pre><p>Along with the defaut constructor with parameters for all fields, there is also a constructor for all of the non-null fields within the table.</p><h4>Interactions</h4><blockquote>Please see the <a href="method-signatures.html"><code>method signatures</code></a> page for information about usage patterns for the various method signatures that are generated.</blockquote><p><strong>inserts - CRUD operators (and then some)</strong></p><pre class="prettyprint lang-java"><code>public void insert(Connection connection) throws SQLException, H2ZeroPrimaryKeyException 
public void insertSilent(Connection connection) 
public void insert() throws SQLException, H2ZeroPrimaryKeyException 
public void insertSilent() 
</code></pre><p>When a new java model is instantiated, this will insert it into the database and retrieve the primary key from the insertion and populate the member variable.</p><p><strong>ensure - CRUD operators (and then some)</strong></p><pre class="prettyprint lang-java"><code>public void ensure(Connection connection) throws SQLException, H2ZeroPrimaryKeyException 
public void ensureSilent(Connection connection) 
public void ensure() throws SQLException, H2ZeroPrimaryKeyException 
public void ensureSilent() 
</code></pre><p>Ensure that there is a row in the database table with exactly the matching member variables.  If it exists, the primary key variable will be set, otherwise it will be inserted.  I.e. Ensure that there is a row in the database.</p><p><strong>updates - CRUD operators (and then some)</strong></p><pre class="prettyprint lang-java"><code>public void update(Connection connection) throws SQLException, H2ZeroPrimaryKeyException 
public void updateSilent(Connection connection) 
public void update() throws SQLException, H2ZeroPrimaryKeyException 
public void updateSilent() 
</code></pre><p>Persist the model to the database, only if there have been some changes to the model object (i.e. has the flag <code>isDirty</code> sit), otherwise it will do nothing.nothing.</p><p>Note: the method signatures that throw an <code>H2ZeroPrimaryKeyException</code> do so if the primary key is null.</p><p><strong>insert or updates - CRUD operators (and then some)</strong></p><pre class="prettyprint lang-java"><code>public void insertOrUpdateSilent() 
</code></pre><p>Insert the model if the primary key is null, otherwise update it (subject to the same caveats as an insert above).</p><p><strong>deletes - CRUD operators (and then some)</strong></p><pre class="prettyprint lang-java"><code>public void delete(Connection connection) throws SQLException, H2ZeroPrimaryKeyException
public void deleteSilent(Connection connection) 
public void delete() throws SQLException, H2ZeroPrimaryKeyException 
public void deleteSilent() 
</code></pre><p>Delete this model from its corresponding row in the database.</p><p>Note: the method signatures that throw an <code>H2ZeroPrimaryKeyException</code> do so if the primary key is null.</p><p><strong>refreshes - CRUD operators (and then some)</strong></p><pre class="prettyprint lang-java"><code>public void refresh() throws H2ZeroPrimaryKeyException 
public void refreshSilent() 
</code></pre><p><strong>Foreign key references</strong></p><pre class="prettyprint lang-java"><code>public UserType getUserType() 
</code></pre><p>Where there is a foreign key reference to the table, not only can you retrieve the id for the foreign key, you may also get a direct reference to the model object, which will automatically find the object in the foreign table.</p><p>In the above code example this will retrieve the <code>UserType</code> object from the database with the associated primary key.</p><p><em>Note: In the case of a constant model (as is above) the lookup field on the constant model will be used, rather than a database query.</em></p><p><strong>Getters and setters</strong></p><pre class="prettyprint lang-java"><code>public void setIdUser(Long idUser) {if(isDifferent(this.idUser, idUser)) {this.idUser = idUser;this.isDirty = true;}}
</code></pre><p>All getters are generated, the setters are generated (in highly compressed format) with a conditional check to ensure that if the member variable has not changed, the model will not be marked as dirty and any call to the update method signatures will do nothing.</p></section></div></div></div></section><div id="footer"><div class="container"><div class="row 200% uniform"></div></div><div class="copyright">&copy; Synapticloop. All rights reserved.</div></div><script src="assets/js/jquery.min.js"></script><script src="assets/js/skel.min.js"></script><script src="assets/js/jquery.dropotron.min.js"></script><script src="assets/js/jquery.onvisible.min.js"></script><script src="assets/js/jquery.poptrox.min.js"></script><script src="assets/js/util.js"></script><!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]--><script src="assets/js/main.js"></script><script type="text/javascript">
	var _paq = _paq || [];
	_paq.push(['trackPageView']);
	_paq.push(['enableLinkTracking']);
	(function() {
		var u="//piwik.synapticloop.com/";
		_paq.push(['setTrackerUrl', u+'piwik.php']);
		_paq.push(['setSiteId', 13]);
		var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
		g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
	})();
</script>
<noscript><p><img src="//piwik.synapticloop.com/piwik.php?idsite=13" style="border:0;" alt="" /></p></noscript>
<script src="javascripts/prettify.js" type="text/javascript" ></script>
</body></html>